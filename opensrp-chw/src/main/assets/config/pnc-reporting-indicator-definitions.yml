indicators:
  - key: "pnc_report_indicator_1_1"
    description: "COUNT of women who delivered in a health facility (last 6 months)"
    indicatorQuery: "select count(*) from ec_pregnancy_outcome where (preg_outcome = 'Live birth' or preg_outcome = 'Stillbirth') and delivery_place = 'Health facility' and (substr(delivery_date, 7, 4) || '-' || substr(delivery_date, 4, 2) || '-' || substr(delivery_date, 1, 2)) >= date('now', '-6 month')"

  - key: "pnc_report_indicator_1_2"
    description: "COUNT of women who delivered elsewhere (last 6 months)"
    indicatorQuery: "select count(*) from ec_pregnancy_outcome where (preg_outcome = 'Live birth' or preg_outcome = 'Stillbirth') and (delivery_place = 'Home' or delivery_place = 'Other') and (substr(delivery_date, 7, 4) || '-' || substr(delivery_date, 4, 2) || '-' || substr(delivery_date, 1, 2)) >= date('now', '-6 month')"

  - key: "pnc_report_indicator_2_1"
    description: "COUNT of babies born with normal birth weight (last 6 months)"
    indicatorQuery: "select count(*) from ec_child where ec_child.low_birth_weight = 'No' and ec_child.dob >= date('now', '-6 month') and ec_child.dod ISNULL and ec_child.relational_id in (select ec_pregnancy_outcome.relational_id from ec_pregnancy_outcome where ec_pregnancy_outcome.preg_outcome = 'Live birth' and (substr(ec_pregnancy_outcome.delivery_date, 7, 4) || '-' || substr(ec_pregnancy_outcome.delivery_date, 4, 2) || '-' || substr(ec_pregnancy_outcome.delivery_date, 1, 2)) >= date('now', '-6 month'));"

  - key: "pnc_report_indicator_2_2"
    description: "COUNT of babies born with low birth weight"
    indicatorQuery: "select count(*) from ec_child where ec_child.low_birth_weight = 'Yes' and ec_child.dob >= date('now', '-6 month') and ec_child.dod ISNULL and ec_child.relational_id in (select ec_pregnancy_outcome.relational_id from ec_pregnancy_outcome where ec_pregnancy_outcome.preg_outcome = 'Live birth' and (substr(ec_pregnancy_outcome.delivery_date, 7, 4) || '-' || substr(ec_pregnancy_outcome.delivery_date, 4, 2) || '-' || substr(ec_pregnancy_outcome.delivery_date, 1, 2)) >= date('now', '-6 month'));"

  - key: "pnc_report_indicator_3_1"
    description: "COUNT of babies born who were early initiated into breastfeeding (last 6 months)"
    indicatorQuery: "select count(*) from ec_child where ec_child.early_bf_1hr = 'Yes' and ec_child.dob >= date('now', '-6 month') and ec_child.dod ISNULL and ec_child.relational_id in (select ec_pregnancy_outcome.relational_id from ec_pregnancy_outcome where ec_pregnancy_outcome.preg_outcome = 'Live birth' and (substr(ec_pregnancy_outcome.delivery_date, 7, 4) || '-' || substr(ec_pregnancy_outcome.delivery_date, 4, 2) || '-' || substr(ec_pregnancy_outcome.delivery_date, 1, 2)) >= date('now', '-6 month'));"

  - key: "pnc_report_indicator_3_2"
    description: "COUNT of babies born who were not early initiated into breastfeeding"
    indicatorQuery: "select count(*) from ec_child where ec_child.early_bf_1hr = 'No' and ec_child.dob >= date('now', '-6 month') and ec_child.dod ISNULL and ec_child.relational_id in (select ec_pregnancy_outcome.relational_id from ec_pregnancy_outcome where ec_pregnancy_outcome.preg_outcome = 'Live birth' and (substr(ec_pregnancy_outcome.delivery_date, 7, 4) || '-' || substr(ec_pregnancy_outcome.delivery_date, 4, 2) || '-' || substr(ec_pregnancy_outcome.delivery_date, 1, 2)) >= date('now', '-6 month'));"

  - key: "pnc_report_indicator_4_1"
    description: "COUNT of babies born in the last 6 months who received BCG on time (Within 4 weeks of birth)"
    indicatorQuery: "select count(distinct vacc.base_entity_id) from vaccines vacc
                      inner join ec_child ec on ec.base_entity_id = vacc.base_entity_id and (ifnull(ec.entry_point,'') = 'PNC')
                      inner join ec_family_member ef on ec.base_entity_id = ef.base_entity_id and ef.date_removed is null
                      inner join ec_pregnancy_outcome po on ec.mother_entity_id = po.base_entity_id
                      where ec.dob >= date('now', '-6 month') and vacc.name = 'bcg' and STRFTIME('%Y-%m-%d', datetime(vacc.date/1000,'unixepoch')) <= date(ec.dob, '+28 days') and po.preg_outcome = 'Live birth' and (substr(po.delivery_date, 7, 4) || '-' || substr(po.delivery_date, 4, 2) || '-' || substr(po.delivery_date, 1, 2)) >= date('now', '-6 month');"

  - key: "pnc_report_indicator_4_2"
    description: "COUNT of babies born in the last 6 months who did not receive BCG on time (Within 4 weeks of birth)"
    indicatorQuery: "select count(distinct ec.base_entity_id) from ec_child ec where  ec.dob >= date('now', '-6 month') and ec.base_entity_id not in
              (select distinct vacc.base_entity_id
             from vaccines vacc
             inner join ec_child ec on ec.base_entity_id = vacc.base_entity_id and (ifnull(ec.entry_point,'') = 'PNC')
             inner join ec_family_member ef on ec.base_entity_id = ef.base_entity_id and ef.date_removed is null
             inner join ec_pregnancy_outcome po on ec.mother_entity_id = po.base_entity_id
             where ec.dob >= date('now', '-6 month') and vacc.name = 'bcg' and STRFTIME('%Y-%m-%d', datetime(vacc.date/1000,'unixepoch')) <= date(ec.dob, '+28 days')
             and po.preg_outcome = 'Live birth' and (substr(po.delivery_date, 7, 4) || '-' || substr(po.delivery_date, 4, 2) || '-' || substr(po.delivery_date, 1, 2)) >= date('now', '-6 month'));"